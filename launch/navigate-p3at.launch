<?xml version="1.0" ?>
<launch>
  <!-- Launches rviz with the robot model -->
  <arg name="urdf" default="pioneer3at.urdf" />
  <arg name="joint_state_gui" default="true" />
  <param name="robot_description" textfile="$(find amr_robots_description)/urdf/$(arg urdf)" />
  <param name="use_gui" value="$(arg joint_state_gui)"/>
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher" />
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find amr_robots_description)/param/p3at_rosaria.rviz" required="true" />
  
  <!-- Launches laser node -->
  <include file="$(find amr_robots_description)/config/urg.launch.xml"/>

  <!-- Launches rosaria -->
  <include file="$(find amr_robots_description)/config/rosaria.launch.xml"/>

  <!-- Localization -->
  <arg name="initial_pose_x" default="0.0"/>
  <arg name="initial_pose_y" default="0.0"/>
  <arg name="initial_pose_a" default="0.0"/>
  <arg name="custom_amcl_launch_file" default="$(find amr_robots_description)/config/amcl.launch.xml"/> 

  <include file="$(arg custom_amcl_launch_file)">
    <arg name="initial_pose_x" value="$(arg initial_pose_x)"/>
    <arg name="initial_pose_y" value="$(arg initial_pose_y)"/>
    <arg name="initial_pose_a" value="$(arg initial_pose_a)"/>
  </include>

  <!-- Move base -->
  <arg name="cmd_vel" default="cmd_vel"/>
  <arg name="odom" default="odom"/>
  
  <include file="$(find amr_robots_description)/config/move_base.launch.xml">
    <arg name="cmd_vel_topic" value="$(arg cmd_vel)"/>
    <arg name="odom_topic" value="$(arg odom)"/>
  </include>

</launch>
